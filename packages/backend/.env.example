# ===========================================
# NITOR BACKEND - ENVIRONMENT VARIABLES
# ===========================================

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# PostgreSQL Database
# Local: postgresql://localhost:5432/nitor
# Render: postgresql://nitor:PASSWORD@dpg-XXX.oregon-postgres.render.com/nitor
# Railway: postgresql://postgres:PASSWORD@containers-us-west-XX.railway.app:5432/railway
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/nitor
SPRING_DATASOURCE_USERNAME=nitor
SPRING_DATASOURCE_PASSWORD=your_database_password_here
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver

# Database Pool Settings
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000

# ===========================================
# JPA & FLYWAY CONFIGURATION
# ===========================================

# JPA Settings
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_USE_SQL_COMMENTS=false

# Flyway Migration
SPRING_FLYWAY_ENABLED=true
SPRING_FLYWAY_BASELINE_ON_MIGRATE=true
SPRING_FLYWAY_LOCATIONS=classpath:db/migration
SPRING_FLYWAY_VALIDATE_ON_MIGRATE=true

# ===========================================
# REDIS CONFIGURATION
# ===========================================

# Redis Cache
# Local: localhost:6379
# Render: Not available in free tier - use SPRING_CACHE_TYPE=simple
# Railway: containers-us-west-XX.railway.app:6379
SPRING_REDIS_HOST=localhost
SPRING_REDIS_PORT=6379
SPRING_REDIS_PASSWORD=your_redis_password_here
SPRING_REDIS_TIMEOUT=60000

# Redis Pool Settings
SPRING_REDIS_LETTUCE_POOL_MAX_ACTIVE=10
SPRING_REDIS_LETTUCE_POOL_MAX_IDLE=5
SPRING_REDIS_LETTUCE_POOL_MIN_IDLE=2

# Cache Type (use 'simple' if Redis not available)
# Options: redis, simple, none
SPRING_CACHE_TYPE=redis

# ===========================================
# FILE STORAGE - AWS S3 / MinIO
# ===========================================

# Get AWS S3 credentials: https://aws.amazon.com/free/
# 1. Create AWS account
# 2. IAM → Users → Create User
# 3. Attach policy: AmazonS3FullAccess
# 4. Create Access Key
# 5. Create S3 bucket (e.g., nitor-files-12345)

# S3 Configuration
MINIO_ENDPOINT=https://s3.amazonaws.com
MINIO_ACCESS_KEY=AKIAXXXXXXXXXXXXXXXX
MINIO_SECRET_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
MINIO_BUCKET_NAME=nitor-files-12345
MINIO_REGION=us-east-1
MINIO_USE_SSL=true

# Alternative: MinIO Self-Hosted
# MINIO_ENDPOINT=http://localhost:9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=minioadmin

# ===========================================
# JWT SECURITY
# ===========================================

# Generate strong 256-bit secret:
# openssl rand -base64 64
JWT_SECRET=xK8vN3mQ9pL2wE5rT7yU1iO0pA4sD6fG8hJ9kL1zX3cV5bN7mQ0wE2rT4yU6iO8pA
JWT_ACCESS_TOKEN_EXPIRATION=86400000
JWT_REFRESH_TOKEN_EXPIRATION=604800000
JWT_ISSUER=nitor.io

# ===========================================
# EMAIL CONFIGURATION - SendGrid
# ===========================================

# Get SendGrid API Key: https://sendgrid.com
# 1. Create free account (100 emails/day free)
# 2. Verify email address
# 3. Settings → API Keys → Create API Key
# 4. Select "Full Access"
# 5. Copy API key (shown only once)

SPRING_MAIL_HOST=smtp.sendgrid.net
SPRING_MAIL_PORT=587
SPRING_MAIL_USERNAME=apikey
SPRING_MAIL_PASSWORD=SG.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
SPRING_MAIL_FROM=noreply@yourdomain.com
SPRING_MAIL_FROM_NAME=NITOR Academic Network

# SMTP Properties
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_REQUIRED=true

# ===========================================
# OAUTH CONFIGURATION - Google
# ===========================================

# Get Google OAuth credentials: https://console.cloud.google.com
# 1. Create new project
# 2. APIs & Services → Credentials
# 3. Create OAuth 2.0 Client ID
# 4. Application type: Web application
# 5. Authorized redirect URIs:
#    - http://localhost:8080/api/auth/oauth2/callback/google (local)
#    - https://your-domain.com/api/auth/oauth2/callback/google (production)

OAUTH_GOOGLE_ENABLED=true
OAUTH_GOOGLE_CLIENT_ID=123456789012-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.apps.googleusercontent.com
OAUTH_GOOGLE_CLIENT_SECRET=GOCSPX-XXXXXXXXXXXXXXXXXXXXXXXXXXXX
OAUTH_GOOGLE_REDIRECT_URI=http://localhost:8080/api/auth/oauth2/callback/google
OAUTH_GOOGLE_SCOPE=openid,profile,email

# ===========================================
# OAUTH CONFIGURATION - GitHub
# ===========================================

# Get GitHub OAuth credentials: https://github.com/settings/developers
# 1. OAuth Apps → New OAuth App
# 2. Application name: NITOR
# 3. Homepage URL: http://localhost:3000 (or your domain)
# 4. Authorization callback URL:
#    - http://localhost:8080/api/auth/oauth2/callback/github (local)
#    - https://your-domain.com/api/auth/oauth2/callback/github (production)

OAUTH_GITHUB_ENABLED=true
OAUTH_GITHUB_CLIENT_ID=Iv1.XXXXXXXXXXXXXXXX
OAUTH_GITHUB_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
OAUTH_GITHUB_REDIRECT_URI=http://localhost:8080/api/auth/oauth2/callback/github
OAUTH_GITHUB_SCOPE=user:email

# ===========================================
# OAUTH CONFIGURATION - LinkedIn
# ===========================================

# Get LinkedIn OAuth credentials: https://www.linkedin.com/developers/apps
# 1. Create new app
# 2. Add redirect URL:
#    - http://localhost:8080/api/auth/oauth2/callback/linkedin (local)
#    - https://your-domain.com/api/auth/oauth2/callback/linkedin (production)

OAUTH_LINKEDIN_ENABLED=false
OAUTH_LINKEDIN_CLIENT_ID=XXXXXXXXXXXXXX
OAUTH_LINKEDIN_CLIENT_SECRET=XXXXXXXXXXXXXXXX
OAUTH_LINKEDIN_REDIRECT_URI=http://localhost:8080/api/auth/oauth2/callback/linkedin
OAUTH_LINKEDIN_SCOPE=r_liteprofile,r_emailaddress

# ===========================================
# CORS CONFIGURATION
# ===========================================

# Allowed origins (comma-separated)
# Local: http://localhost:3000,http://localhost:5173
# Production: https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_EXPOSED_HEADERS=Authorization
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ===========================================
# SERVER CONFIGURATION
# ===========================================

# Server Port
SERVER_PORT=8080

# Compression
SERVER_COMPRESSION_ENABLED=true
SERVER_COMPRESSION_MIME_TYPES=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json

# HTTP/2
SERVER_HTTP2_ENABLED=true

# ===========================================
# LOGGING CONFIGURATION
# ===========================================

LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_IO_NITOR=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=WARN
LOGGING_LEVEL_ORG_HIBERNATE=WARN
LOGGING_FILE_NAME=logs/nitor-backend.log
LOGGING_FILE_MAX_SIZE=100MB
LOGGING_FILE_MAX_HISTORY=30

# ===========================================
# ACTUATOR ENDPOINTS
# ===========================================

MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,prometheus,metrics
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when_authorized
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================

# Spring Profile (dev, prod)
SPRING_PROFILES_ACTIVE=dev

# Application Info
SPRING_APPLICATION_NAME=nitor-backend
APP_VERSION=1.0.0
APP_BASE_URL=http://localhost:3000

# AI Service URL
APP_AI_SERVICE_URL=http://localhost:3001

# ===========================================
# RATE LIMITING
# ===========================================

RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=5
RATE_LIMIT_API_REQUESTS_PER_MINUTE=100
RATE_LIMIT_SEARCH_REQUESTS_PER_MINUTE=60

# ===========================================
# NOTES
# ===========================================

# FREE API KEYS:
# - Google Gemini: https://makersuite.google.com/app/apikey (60 req/min free)
# - SendGrid: https://sendgrid.com (100 emails/day free)
# - AWS S3: https://aws.amazon.com/free (5GB free for 12 months)
# - Google OAuth: https://console.cloud.google.com (free)
# - GitHub OAuth: https://github.com/settings/developers (free)

# DEPLOYMENT GUIDES:
# - Free Deployment: See FREE_DEPLOYMENT_GUIDE.md
# - Production: See PRODUCTION_DEPLOYMENT_COMPLETE_GUIDE.md
# - Local: See docs/LOCAL_DEPLOYMENT.md
